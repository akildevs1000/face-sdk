# 人脸机、指纹机、控制板

## **webAPI**

## **控制接口**

## 协议格式定义

#### 通讯方式

本协议基于http 通讯方式

#### 协议格式

协议格式基于JSON字符串，命令所需的参数都放到body中提交

#### 请求地址格式说明

测试地址：

```
https://www.facedata.vip:9901
```

地址格式：

```
https://ip:port/{sn}/{command}
```

sn为设备SN编号(16位)，command需要执行的命令：

```

 https://ip:port/FC-8300T21076163/opendoor

```

上面的URL地址表示发送开门命令

#### 使用前准备

##### 人脸设备设置

广域网：设置设备服务器IP为 服务器外网IP 端口为配置文件设置的TCP SERVER 监听端口

局域网：调用“注册设备”接口进行设备注册，注册完成之后才能通过SN调用命令

#### 命令响应

| 字段    | 类型   | 必填 | 描述                                 |
| ------- | ------ | ---- | ------------------------------------ |
| command | string | 是   | 返回执行的命令方法                   |
| status  | int    | 是   | 命令执行状态                         |
| message | string | 是   | 命令消息                             |
| guid    | string | 否   | 暂不使用                             |
| data    | object | 否   | 根据不同命令，响应的结果也与之对应。 |

status：

| 返回值 | 描述         |
| ------ | ------------ |
| 200    | 命令成功     |
| 100    | 命令超时     |
| 101    | 通讯密码错误 |
| 102    | 命令错误     |
| 103    | 命令参数错误 |
| 104    | 连接设备超时 |



##通用命令

### 注册设备

命令：[Register](/ApiTest/register.html)

Body参数:

| 字段 | 类型 | 必填 | 描述 |
| --- | --- | --- | --- |
| sn | String | 是 | 设备sn（获取设备列表时可空） |
| ip | String | 否 | 设备ip |
| port | Int | 否 | 设备端口 |
示例：

```json
 { 
     "sn": FC-8600T20124011,
     "ip": "192.168.1.130",
     "port": 8101 
 }
```





### **获取已注册列表**

命令：[getDevices](/ApiTest/getDevices.html)

Body参数：无

响应参数：

```json
[
    {
        "sn":"FC-8300T21076163",
        "ip":"192.168.1.62",
        "port":"51283"
    }
]
```




### 远程开门

命令：[opendoor](/ApiTest/openDoor.html)

Body参数：无

```json
{
    "data":null,
    "status":200,
    "message":"开门成功"
}
```




### **远程关门**

命令：[closedoor](/ApiTest/closeDoor.html)

Body参数：无

```json
{
    "data":null,
    "status":200,
    "message":"关门成功"
}
```



### **门常开**

命令：[holddoor](/ApiTest/holdDoor.html)

Body参数：无

```json
{
    "data":null,
    "status":200,
    "message":"门常开成功"
}
```


### 获取记录

命令：[getRecord](/ApiTest/getRecord.html)

Body参数：无

![输入图片说明](https://www.facedata.vip:9901/images/getRecord.png "getRecord.png")

返回字段：

| 字段 | 类型 | 必填 | 描述 |
| --- | --- | --- | --- |
| Quantity | Int | 是 | 读取数量 |
| readable | int | 是 | 剩余新记录数量 |
| CardTransactionReadIndex | string | 是 | 当前记录位置 |
| BodyTemperatureReadIndex | string | 是 | 当前体温记录位置 |
| TransactionList | Array | 否 | 记录列表 |

TransactionList:

| 字段 | 类型 | 必填 | 描述 |
| --- | --- | --- | --- |
| RecordNumber | Int | 是 | 记录唯一编号 |
| UserCode | long | 否 | 用户编号 |
| RecordImage | string | 否 | 记录图片Base64 |
| Accesstype | Byte | 否 | 出入类型：1--表示进门；2--表示出门 |
| BodyTemperature | double | 否 | 体温 |
| RecordDate | datetime | 是 | 记录时间 |
| RecordType | Int | 是 | 记录类型1 认证记录2 门磁记录3 系统日志4 体温记录 |
| RecordCode | int | 是 | [记录代码](#记录代码) |
| RecordMsg | string | 是 | 记录消息 |


### 重置记录

当记录需要从头获取时候，可以调用该接口

命令：[resetRecord](/ApiTest/resetRecord.html)

Body参数：无

![输入图片说明](https://www.facedata.vip:9901/images/resetRecord.png "resetRecord.png")



### 消息推送

消息推送协议基于websocket 通讯方式

连接成功之后会返回连接成功的消息

返回的消息格式为JSON

连接地址格式:ws://8.142.71.221:9903/WebSocket

记录格式：参考7、获取记录

测试客户端：[SocketClient.html](/SocketClient.html)

返回字段：

| 字段            | 类型   | 必填 | 描述                                                   |
| --------------- | ------ | ---- | ------------------------------------------------------ |
| TransactionType | int    | 是   | 记录类型 1--门禁控制器记录 2--心跳 3--人脸机指纹机记录 |
| Status          | string | 是   | 状态200表示成功，其他表示错误                          |
| Message         | string | 是   | 处理消息                                               |
| Data            | Array  | 否   | 记录列表                                               |

人脸指纹记录:

| 字段            | 类型     | 必填 | 描述                                             |
| --------------- | -------- | ---- | ------------------------------------------------ |
| RecordNumber    | Int      | 是   | 记录唯一编号                                     |
| UserCode        | long     | 否   | 用户编号                                         |
| Photo           | int      | 是   | 是否包含图片 0表示没有图片，1表示有图片          |
| RecordImage     | string   | 否   | 记录图片Base64                                   |
| Accesstype      | Byte     | 否   | 出入类型：1--表示进门；2--表示出门               |
| BodyTemperature | double   | 否   | 体温                                             |
| RecordDate      | datetime | 是   | 记录时间                                         |
| RecordType      | Int      | 是   | 记录类型1 认证记录2 门磁记录3 系统日志4 体温记录 |
| RecordCode      | int      | 是   | [记录代码](#记录代码)                            |
| RecordMsg       | string   | 是   | 记录消息                                         |
| sn              | string   | 是   | 设备SN                                           |

刷卡记录：

| 字段         | 类型     | 必填 | 描述                                                         |
| ------------ | -------- | ---- | ------------------------------------------------------------ |
| RecordNumber | Int      | 是   | 记录唯一编号                                                 |
| Accesstype   | Byte     | 否   | 出入类型：1--表示进门；2--表示出门                           |
| RecordDate   | datetime | 是   | 记录时间                                                     |
| RecordType   | Int      | 是   | 记录类型1--读卡记录 2--出门开关记录 3--门磁记录 4--软件操作记录 5--报警记录 6--系统记录 |
| RecordCode   | int      | 是   | [记录代码](#记录代码)                                        |
| RecordMsg    | string   | 是   | 记录消息                                                     |
| sn           | string   | 是   | 设备SN                                                       |
| Door         | int      | 是   | 门号 1-4                                                     |
| CardData     | string   | 是   | 卡号                                                         |

### 添加人员

命令：[addPerson](/ApiTest/addPerson.html)

Body参数：

| 字段        | 类型   | 必填 | 描述                                                      |
| ----------- | ------ | ---- | --------------------------------------------------------- |
| name        | string | 是   | 人员姓名（限制15字符内容）                                |
| userCode    | int    | 是   | 用户编号（不能小于1）                                     |
| code        | string | 否   | 人员编号（限制30个10进制数字）                            |
| cardData    | string | 否   | 卡号，取值范围0x1-0xFFFFFFFF                              |
| password    | string | 否   | 卡密码,无密码不填。密码是4-8位的数字                      |
| job         | string | 否   | 人员职务（限制15字符内容）                                |
| dept        | string | 否   | 人员部门（限制15字符内容）                                |
| identity    | int    | 否   | 用户身份0 -- 普通用户1 -- 管理员                          |
| cardStatus  | int    | 否   | 卡片状态0：正常状态；1：挂失；2：黑名单；3：已删除        |
| cardType    | int    | 否   | 卡片类型0 -- 普通卡1 -- 常开                              |
| enterStatus | int    | 否   | 出入标记0 出入有效1 入有效2 出有效                        |
| expiry      | string | 否   | 出入截止日期，最大2089年12月31日                          |
| openTimes   | int    | 否   | 有效次数,取值范围：0-65535;65535表示无限制                |
| faceImage   | String | 否   | 人脸图片 (要求 480*640  jpg格式)                          |
| face        | int    | 否   | 是否有人脸照片；1表示有人脸照片                           |
| fp          | array  | 否   | 指纹特征码Base64，可以有多个 （需要根据设备指纹版本生成） |
| fpCount     | int    | 否   | 指纹的数量                                                |

发送示例：

```json
{
	"name": "user name",
	"userCode": 10000,
	"code": "10000",
	"cardData": 5,
	"password": "12345678",
	"job": 1,
	"dept": 1,
	"identity": 0,
	"cardStatus": 0,
	"cardType": 0,
	"enterStatus": 0,
	"expiry": "2021-10-10 00:00:00",
	"openTimes": 65535,
	"faceImage": "/9j/4AAQSkZJRgABAQAAAQABAAD.....",
	"fp": [
		"/9j/4AAQSkZJRgABAQAAAQABAAD......",
		"/9j/4AAQSkZJRgABAQAAAQABAAD......"
	],
}
```

响应参数：

```json
{
    "UserUploadStatus":false,
    "IdDataRepeatUser":1001,
    "IdDataUploadStatus":4
}
```

| 字段               | 类型 | 必填 | 描述                                                         |
| ------------------ | ---- | ---- | ------------------------------------------------------------ |
| UserUploadStatus   | bool | 是   | 上传成功状态：true---上传成功；false--上传失败               |
| IdDataRepeatUser   | uint | 是   | 人员重复用户号（IdDataUploadStatus=4时返回重复与当前人员重复的用户号） |
| IdDataUploadStatus | int  | 是   | 上传状态：1--上传完毕；2--特征码无法识别；3--人员照片不可识别；4--人员照片或特征码重复；0--没有 |

### 批量添加人员 

命令：http://ip:port/Person/AddRange

Body参数：

| 字段       | 类型  | 必填 | 描述                           |
| ---------- | ----- | ---- | ------------------------------ |
| snList     | array | 是   | 设备SN列表                     |
| personList | array | 是   | 人员列表（参考添加人员的字段） |

发送示例：

```json
{
	"snList": ["FC-8150H12345678", "FC-8150H12345679"],
	"personList": [{
		"name": "user name",
		"userCode": "10000",
		"code": "10000",
		"cardData": 5,
		"password": "12345678",
		"job": 1,
		"dept": 1,
		"identity": 0,
		"cardStatus": 0,
		"cardType": 0,
		"enterStatus": 0,
		"expiry": "2021-10-10 00:00:00",
		"openTimes": 65535,
		"faceImage": "/9j/4AAQSkZJRgABAQAAAQABAAD.....",     
		"fp": [
			"/9j/4AAQSkZJRgABAQAAAQABAAD......",
			"/9j/4AAQSkZJRgABAQAAAQABAAD......"
		]
	}]
}
```



### 删除人员

命令：[deletePerson](/ApiTest/deletePerson.html)

body参数：

| 字段          | 类型  | 必填 | 描述         |
| ------------- | ----- | ---- | ------------ |
| userCodeArray | array | 是   | 用户编号数组 |

发送示例：

```
{
    "userCodeArray":[10000,10001]
}
```



### 获取人员

命令：[getPersonDetail](/ApiTest/getPersonDetail.html)

body参数：

| 字段     | 类型 | 必填 | 描述     |
| -------- | ---- | ---- | -------- |
| userCode | int  | 是   | 用户编号 |

发送示例：

```json
{
    "usercode":10000
}
```

响应参数：

```json
{
	"name": "user name",
	"userCode": "10000",
	"code": "10000",
	"cardData": 5,
	"password": "12345678",
	"job": 1,
	"dept": 1,
	"identity": 0,
	"cardStatus": 0,
	"cardType": 0,
	"enterStatus": 0,
	"expiry": "2021-10-10 00:00:00",
	"openTimes": 65535,
	"faceImage": "/9j/4AAQSkZJRgABAQAAAQABAAD.....",
    "face":1,
	"fp": [
		"/9j/4AAQSkZJRgABAQAAAQABAAD......",
		"/9j/4AAQSkZJRgABAQAAAQABAAD......"
	],
    "fpCount":2
}
```

### 获取所有人员信息

注意：获取的人员信息是不带图片信息和指纹特征信息，如果需要可以通过ReadFace和ReadFeature命令获取

命令：GetPersonAll

响应示例：

```json
[
    {
	"name": "user name",
	"userCode": "10000",
	"code": "10000",
	"cardData": 5,
	"password": "12345678",
	"job": 1,
	"dept": 1,
	"identity": 0,
	"cardStatus": 0,
	"cardType": 0,
	"enterStatus": 0,
	"expiry": "2021-10-10 00:00:00",
	"openTimes": 65535,	
    "face":1,
    "fpCount":2
	}
]
```

### 清空所有人员信息

清空人员时会将人员的照片、指纹、掌静脉等特征清除

命令：DeleteAllPerson

响应示例：

```json
{
    "data":null,
    "status":200,
    "message":"清空成功"
}
```

人员信息存储详情

读取设备上存储的用户、人脸、指纹掌静脉的存储信息

命令：GetDataBaseDetali

响应示例：

```json
{
	"sortDataBaseSize": 20000,
	"sortPersonSize": 3,
	"sortFingerprintDataBaseSize": 0,
	"sortFingerprintSize": 0,
	"sortFaceDataBaseSize": 20000,
	"sortFaceSize": 2,
	"palmDataBaseSize": 0,
	"palmSize": 0
}
```

| 字段                        | 类型 | 必填 | 描述               |
| --------------------------- | ---- | ---- | ------------------ |
| sortDataBaseSize            | long | 是   | 人员档案最大容量   |
| sortPersonSize              | long | 是   | 已存储人员数量     |
| sortFingerprintDataBaseSize | long | 是   | 指纹特征码最大容量 |
| sortFingerprintSize         | long | 是   | 已存储指纹数量     |
| sortFaceDataBaseSize        | long | 是   | 人脸特征码最大容量 |
| sortFaceSize                | long | 是   | 已存储人脸数量     |
| palmDataBaseSize            | long | 是   | 掌静脉最大容量     |
| palmSize                    | long | 是   | 已存储掌静脉数量   |

### 获取人脸图片

命令：ReadFace

body参数：

| 字段     | 类型 | 必填 | 描述     |
| -------- | ---- | ---- | -------- |
| userCode | int  | 是   | 用户编号 |

发送示例：

```json
{
    "usercode":10000
}
```

响应参数：

```json
{
    "data":"/9j/4AAQSkZJRgABAQAAAQABAAD....."
}
```



### 获取指纹特征

命令：ReadFace

body参数：

| 字段         | 类型 | 必填 | 描述        |
| ------------ | ---- | ---- | ----------- |
| userCode     | int  | 是   | 用户编号    |
| serialNumber | int  | 是   | 指纹序号0-2 |

发送示例：

```json
{
    "usercode":10000,
    "serialNumber":0
}
```

响应参数：

```json
{
    "data":"/9j/4AAQSkZJRgABAQAAAQABAAD....."
}
```

### 删除人脸照片、指纹特征、掌静脉

命令：DeleteFeatureCode

body参数：

| 字段        | 类型       | 必填 | 描述                        |
| ----------- | ---------- | ---- | --------------------------- |
| userCode    | int        | 是   | 用户编号                    |
| fingerprint | array(int) | 否   | 指纹序号，取值范围：0-2     |
| palm        | array(int) | 否   | 掌静脉序号，取值范围：1-2   |
| photo       | array(int) | 否   | 人脸照片序号，取值范围：1-5 |

发送示例：

```json
[{
	"userCode": 10000,
	"fingerprint": [0, 1, 2],
	"palm": [1, 2],
	"photo": [1, 2, 3, 4, 5]
}]
```

全部成功响应示例：

```json
{
    data:[]
}
```

错误响应示例：

```json
{
	"data": [{
		"userCode": 10000,
		"message": "删除失败"
	}]
}
```



### 设置工作参数

命令：[setWorkParam](/ApiTest/setWorkParam.html)

Body参数：

| 字段         | 类型     | 必填 | 描述                                                         |
| ------------ | -------- | ---- | ------------------------------------------------------------ |
| name         | string   | 是   | 设备名称，最大30个字符（需要修改设备名称时，进出类别也需要填写，修改进出类别亦是如此） |
| door         | byte     | 是   | 进出类别：0--进门；1--出门                                   |
| maker        | objcet   | 否   | 设备制造商信息                                               |
| language     | byte     | 否   | 语言1 -中文，2 -英文，3 -繁体，4 -法语，5 -俄语，6 -葡萄牙语，7 -西班牙语，8 -意大利语，9 -日语，10 -韩语，11 -泰语，12 -阿拉伯语， |
| volume       | byte     | 否   | 音量音量取值范围：0-10；0--关闭声音；10--最大声音默认值：10  |
| menuPassword | string   |      | 菜单密码仅支持4-8位数字密码                                  |
| savePhoto    | byte     |      | 现场照片保存开关取值范围：0--禁止保存；1--保存现场照片       |
| msgPush      | byte     |      | 消息推送开关0--禁用；1--启用启用后，有验证开门、系统报警等事件发生时就会在链路上推送消息，连接断开时缓存离线消息，连接建立后继续推送 |
| time         | datetime |      | 日期时间同步yyyy-MM-dd HH:mm:ss                              |

Maker：

| 字段         | 类型   | 必填 | 描述           |
| ------------ | ------ | ---- | -------------- |
| manufacturer | string | 是   | 设备制造商名称 |
| webAddr      | string | 是   | 设备制造商网站 |
| deliveryDate | string | 是   | 设备出厂时间   |

发送示例：

```json
{
	"name": "device name",
	"door": 0,
	"maker": {
		"manufacturer": "manufacturer name",
		"webAddr": "httpss://www.githubs.cn/",
		"deliveryDate": "2021-10-10 00:00:00"
	},
	"language": 2,
	"volume": 5,
	"menuPassword": "12345678",
	"savePhoto": 1,
	"msgPush": 1,
	"time": "2021-10-10 00:00:00"
}
```



### 获取工作参数

命令：[getWorkParam](/ApiTest/getWorkParam.html)

Body参数：无

## 控制板设备

### 添加卡号

命令：[addCard](/ApiTest/addCard.html)

body参数：

| 字段     | 类型      | 必填 | 描述                                      |
| -------- | --------- | ---- | ----------------------------------------- |
| cards    | ArrayList | 是   | 卡信息列表                                |
| areaType | int       | 否   | 存储区域：0--非排序区；1--排序区；默认--0 |

cards:

| 字段      | 类型   | 必填 | 描述                                                         |
| --------- | ------ | ---- | ------------------------------------------------------------ |
| cardData  | string | 是   | 卡号                                                         |
| password  | string | 否   | 卡密码：如果添加了卡密码，刷卡是需要键盘输入密码才能开门     |
| expiry    | string | 否   | 有效期：默认有效期是2089-12-31 23:59:59                      |
| doors     | object | 否   | 开门权限：true--有开门权限；false--无开门权限;默认拥有所有权限 |
| openTimes | int    | 否   | 开门次数：0--没有开门次数，65535---无限制;默认--无限制       |

doors：

| 字段  | 类型 | 必填 | 描述  |
| ----- | ---- | ---- | ----- |
| door1 | bool | 是   | 门号1 |
| door2 | bool | 是   | 门号2 |
| door3 | bool | 是   | 门号3 |
| door4 | bool | 是   | 门号4 |

发送示例：

```json
{
	"cards": [{
		"cardData": "1463821531",
		"password": "12345678",
		"expiry": "2089-12-31 23:59:59",
		"doors": {
			"door1": true,
			"door2": true,
			"door3": true,
			"door4": true
		},
		"openTimes": 65535

	}],
	"areaType": 0
}
```



### 删除卡号

命令：[deleteCard](/ApiTest/deleteCard.html)

body参数：

| 字段      | 类型  | 必填 | 描述               |
| --------- | ----- | ---- | ------------------ |
| CardArray | Array | 是   | 需要删除的卡号数组 |

发送示例：

```json
{
	"CardArray": ["1463821531", "1483923632"]
}
```

## 记录代码

### 人脸指纹机记录代码

####  人脸指纹机记录类型 RecordType

| 值   | 说明                         |
| ---- | ---------------------------- |
| 1    | 认证记录                     |
| 2    | 门磁记录                     |
| 3    | 系统日志                     |
| 4    | 体温记录（RecordCode固定=1） |



### 人脸指纹机记录代码  RecordCode

#### 认证记录类型

| 值   | 说明                                                |
| ---- | --------------------------------------------------- |
| 1    | 刷卡验证                                            |
| 2    | 指纹验证                                            |
| 3    | 人脸验证                                            |
| 4    | 刷卡 + 指纹                                         |
| 5    | 人脸 + 指纹                                         |
| 6    | 刷卡 + 人脸                                         |
| 7    | 刷卡 + 密码                                         |
| 8    | 人脸 + 密码                                         |
| 9    | 指纹 + 密码                                         |
| 10   | 密码验证  用户号加密码                              |
| 11   | 刷卡 + 指纹 + 密码                                  |
| 12   | 刷卡 + 人脸 + 密码                                  |
| 13   | 指纹 + 人脸 + 密码                                  |
| 14   | 刷卡 + 指纹 + 人脸                                  |
| 15   | 重复验证                                            |
| 16   | 有效期过期                                          |
| 17   | 开门时段过期                                        |
| 18   | 节假日时不能开门                                    |
| 21   | 有效次数已用尽                                      |
| 22   | 锁定时验证，禁止开门                                |
| 23   | 挂失卡                                              |
| 24   | 黑名单卡                                            |
| 25   | 免验证开门 -- 按指纹时用户号为0，刷卡时用户号是卡号 |
| 30   | 体温异常，拒绝进入                                  |
| 31   | 访客密码开门                                        |
| 32   | 动态二维码扫码开门                                  |
| 33   | 在设备菜单中新增人员                                |
| 34   | 在设备菜单中修改人员                                |
| 35   | 在设备菜单中删除人员                                |
| 36   | 掌静脉识别                                          |
| 37   | 刷卡 + 掌静脉 + 人脸                                |
| 38   | 掌静脉 + 密码                                       |
| 39   | 刷卡 + 掌静脉                                       |
| 40   | 人脸 + 掌静脉                                       |
| 41   | 刷卡 + 掌静脉 + 密码                                |
| 42   | 掌静脉 + 人脸 + 密码                                |
| 43   | 指纹 + 掌静脉 + 人脸                                |
| 44   | 组合验证--等待下一个人员                            |
| 45   | 组合验证失败                                        |
| 46   | 组合验证完成                                        |
| 47   | 人证比对                                            |

#### 门磁记录

| 值   | 说明               |
| ---- | ------------------ |
| 1    | 门磁-开门          |
| 2    | 门磁-关门          |
| 5    | 门未关好           |
| 6    | 使用按钮开门       |
| 7    | 按钮开门时门已锁定 |

#### 系统日志

| 值   | 说明                      |
| ---- | ------------------------- |
| 1    | 软件开门                  |
| 2    | 软件关门                  |
| 3    | 软件常开                  |
| 4    | 控制器自动进入常开        |
| 5    | 控制器自动关闭门          |
| 8    | 软件锁定                  |
| 9    | 软件解除锁定              |
| 14   | 非法认证报警              |
| 15   | 门磁报警                  |
| 16   | 胁迫报警                  |
| 17   | 开门超时报警              |
| 18   | 黑名单报警                |
| 19   | 消防报警                  |
| 20   | 防拆报警                  |
| 21   | 非法认证报警解除          |
| 22   | 门磁报警解除              |
| 23   | 胁迫报警解除              |
| 24   | 开门超时报警解除          |
| 25   | 黑名单报警解除            |
| 26   | 消防报警解除              |
| 27   | 防拆报警解除              |
| 28   | 系统加电                  |
| 29   | 系统错误复位（看门狗）    |
| 30   | 设备格式化记录            |
| 34   | 网线已断开                |
| 35   | 网线已插入                |
| 36   | WIFI 已连接               |
| 37   | WIFI 已断开               |
| 38   | 蓝牙开门                  |
| 39   | 点名超时                  |
| 40   | 在设备菜单中清空所有人员  |
| 41   | 在设备菜单中备份人员到U盘 |
| 42   | 在设备菜单中从U盘导入人员 |
| 43   | 室内机远程开门            |
| 44   | 删除所有记录              |
| 45   | 删除所有人员              |



###  门禁控制器记录类型 RecordType

| 值   | 说明         |
| ---- | ------------ |
| 1    | 读卡记录     |
| 2    | 出门开关记录 |
| 3    | 门磁记录     |
| 4    | 软件操作记录 |
| 5    | 报警记录     |
| 6    | 系统记录     |

### 门禁控制器记录代码  RecordCode

#### 读卡记录

| 值   | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| 1    | 合法开门                                                     |
| 2    | 密码开门------------卡号为密码                               |
| 3    | 卡加密码                                                     |
| 4    | 手动输入卡加密码                                             |
| 5    | 首卡开门                                                     |
| 6    | 门常开  ---  常开工作方式中，刷卡进入常开状态                |
| 7    | 多卡开门  --  多卡验证组合完毕后触发                         |
| 8    | 重复读卡                                                     |
| 9    | 有效期过期                                                   |
| 10   | 开门时段过期                                                 |
| 11   | 节假日无效                                                   |
| 12   | 未注册卡                                                     |
| 13   | 巡更卡  --  不开门                                           |
| 14   | 探测锁定                                                     |
| 15   | 无有效次数                                                   |
| 16   | 防潜回                                                       |
| 17   | 密码错误------------卡号为错误密码                           |
| 18   | 密码加卡模式密码错误----卡号为卡号。                         |
| 19   | 锁定时(读卡)或(读卡加密码)开门                               |
| 20   | 锁定时(密码开门)                                             |
| 21   | 首卡未开门                                                   |
| 22   | 挂失卡                                                       |
| 23   | 黑名单卡                                                     |
| 24   | 门内上限已满，禁止入门。                                     |
| 25   | 开启防盗布防状态(设置卡)                                     |
| 26   | 撤销防盗布防状态(设置卡)                                     |
| 27   | 开启防盗布防状态(密码)                                       |
| 28   | 撤销防盗布防状态(密码)                                       |
| 29   | 互锁时(读卡)或(读卡加密码)开门                               |
| 30   | 互锁时(密码开门)                                             |
| 31   | 全卡开门                                                     |
| 32   | 多卡开门--等待下张卡                                         |
| 33   | 多卡开门--组合错误                                           |
| 34   | 非首卡时段刷卡无效                                           |
| 35   | 非首卡时段密码无效                                           |
| 36   | 禁止刷卡开门  --  【开门认证方式】验证模式中禁用了刷卡开门时 |
| 37   | 禁止密码开门  --  【开门认证方式】验证模式中禁用了密码开门时 |
| 38   | 门内已刷卡，等待门外刷卡。（门内外刷卡验证）                 |
| 39   | 门外已刷卡，等待门内刷卡。（门内外刷卡验证）                 |
| 40   | 请刷管理卡(在开启管理卡功能后提示)(电梯板)                   |
| 41   | 请刷普通卡(在开启管理卡功能后提示)(电梯板)                   |
| 42   | 首卡未读卡时禁止密码开门。                                   |
| 43   | 控制器已过期_刷卡                                            |
| 44   | 控制器已过期_密码                                            |
| 45   | 合法卡开门—有效期即将过期                                    |
| 46   | 拒绝开门--区域反潜回失去主机连接。                           |
| 47   | 拒绝开门--区域互锁，失去主机连接                             |
| 48   | 区域防潜回--拒绝开门                                         |
| 49   | 区域互锁--有门未关好，拒绝开门                               |
| 50   | 开门密码有效次数过期                                         |
| 51   | 开门密码有效期过期                                           |
| 52   | 二维码已过期                                                 |

#### 出门开关记录

| 值   | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| 1    | 合法开门                                                     |
| 2    | 开门时段过期                                                 |
| 3    | 锁定时按钮当由远程锁定，定时锁定，报警锁定等功能使控制板进入锁定状态时触发按钮，这时不开门，并记录为此种类型 |
| 4    | 控制器已过期                                                 |
| 5    | 互锁时按钮(不开门)                                           |

#### 门磁记录

| 值   | 说明             |
| ---- | ---------------- |
| 1    | 开门             |
| 2    | 关门             |
| 3    | 进入门磁报警状态 |
| 4    | 退出门磁报警状态 |
| 5    | 门未关好         |

#### 软件操作记录

| 值   | 说明                               |
| ---- | ---------------------------------- |
| 1    | 软件开门                           |
| 2    | 软件关门                           |
| 3    | 软件常开                           |
| 4    | 控制器自动进入常开                 |
| 5    | 控制器自动关闭门                   |
| 6    | 长按出门按钮常开                   |
| 7    | 长按出门按钮常闭                   |
| 8    | 软件锁定                           |
| 9    | 软件解除锁定                       |
| 10   | 控制器定时锁定--到时间自动锁定     |
| 11   | 控制器定时锁定--到时间自动解除锁定 |
| 12   | 报警--锁定                         |
| 13   | 报警--解除锁定                     |
| 14   | 互锁时远程开门                     |

#### 报警记录

0x开头的值是16进制表示

| 值   | 说明                       |
| ---- | -------------------------- |
| 1    | 门磁报警                   |
| 2    | 匪警报警                   |
| 3    | 消防报警                   |
| 4    | 非法卡刷报警               |
| 5    | 胁迫报警                   |
| 6    | 消防报警(命令通知)         |
| 7    | 烟雾报警                   |
| 8    | 防盗报警                   |
| 9    | 黑名单报警                 |
| 10   | 开门超时报警               |
| 0x11 | 门磁报警撤销               |
| 0x12 | 匪警报警撤销               |
| 0x13 | 消防报警撤销               |
| 0x14 | 非法卡刷报警撤销           |
| 0x15 | 胁迫报警撤销               |
| 0x17 | 撤销烟雾报警               |
| 0x18 | 关闭防盗报警               |
| 0x19 | 关闭黑名单报警             |
| 0x1A | 关闭开门超时报警           |
| 0x21 | 门磁报警撤销(命令通知)     |
| 0x22 | 匪警报警撤销(命令通知)     |
| 0x23 | 消防报警撤销(命令通知)     |
| 0x24 | 非法卡刷报警撤销(命令通知) |
| 0x25 | 胁迫报警撤销(命令通知)     |
| 0x27 | 撤销烟雾报警(命令通知)     |
| 0x28 | 关闭防盗报警(软件关闭)     |
| 0x29 | 关闭黑名单报警(软件关闭)   |
| 0x2A | 关闭开门超时报警           |
| 0xB  | 控制板防拆报警             |
| 0x1B | 关闭控制板防拆报警         |
| 0xC  | 读卡器防拆报警             |
| 0x1C | 关闭读卡器防拆报警         |
|      |                            |

#### 系统记录

| 值   | 说明                                   |
| ---- | -------------------------------------- |
| 1    | 系统加电                               |
| 2    | 系统错误复位（看门狗）                 |
| 3    | 设备格式化记录                         |
| 4    | 系统高温记录，温度大于>75              |
| 5    | 系统UPS供电记录                        |
| 6    | 温度传感器损坏，温度大于>100           |
| 7    | 电压过低，小于<09V                     |
| 8    | 电压过高，大于>14V                     |
| 9    | 读卡器接反。                           |
| 10   | 读卡器线路未接好。                     |
| 11   | 无法识别的读卡器                       |
| 12   | 电压恢复正常，小于14V，大于9V          |
| 13   | 网线已断开                             |
| 14   | 网线已插入                             |
| 15   | 后备电池 电压过低，小于<09V            |
| 16   | 后备电池  电压过高，大于>14V           |
| 17   | 后备电池 电压恢复正常，小于14V，大于9V |

